{
  "globals": {
    "building_identifier": [
      "Unique identifier attribute present in input footprint source",
      "str",
      "OIDN"
    ],
    "input_footprint": [
      "Input 2D vector file with building footprint(s)",
      "str",
      ""
    ],
    "input_pointcloud": [
      "Input pointcloud. Should contain building (6) and ground class (2)",
      "str",
      ""
    ],
    "output_cityjson": [
      "CityJSON output file",
      "str",
      ""
    ],
    "output_cj_identifier": [
      "CityJSON metatdata identifier",
      "str",
      ""
    ],
    "output_cj_poc_address": [
      "CityJSON metatdata poc_address. See https://www.cityjson.org/specs/1.1.1/#metadata",
      "str",
      ""
    ],
    "output_cj_poc_contactName": [
      "CityJSON metatdata poc_contactName. See https://www.cityjson.org/specs/1.1.1/#metadata",
      "str",
      ""
    ],
    "output_cj_poc_contactType": [
      "CityJSON metatdata poc_contactType. See https://www.cityjson.org/specs/1.1.1/#metadata",
      "str",
      ""
    ],
    "output_cj_poc_email": [
      "CityJSON metatdata poc_email. See https://www.cityjson.org/specs/1.1.1/#metadata",
      "str",
      ""
    ],
    "output_cj_poc_phone": [
      "CityJSON metatdata poc_phone. See https://www.cityjson.org/specs/1.1.1/#metadata",
      "str",
      ""
    ],
    "output_cj_poc_type": [
      "CityJSON metatdata poc_type. See https://www.cityjson.org/specs/1.1.1/#metadata",
      "str",
      ""
    ],
    "output_cj_poc_website": [
      "CityJSON metatdata poc_website. See https://www.cityjson.org/specs/1.1.1/#metadata",
      "str",
      ""
    ],
    "output_cj_referenceDate": [
      "CityJSON metatdata referenceDate. See https://www.cityjson.org/specs/1.1.1/#metadata",
      "str",
      "08-08-2022"
    ],
    "output_cj_referenceSystem": [
      "CityJSON metatdata referenceSystem. See https://www.cityjson.org/specs/1.1.1/#metadata",
      "str",
      "https://www.opengis.net/def/crs/EPSG/0/31370"
    ],
    "output_cj_title": [
      "CityJSON metatdata title. See https://www.cityjson.org/specs/1.1.1/#metadata",
      "str",
      "3D model generated by Geoflow"
    ],
    "output_obj_lod12": [
      "OBJ LoD12 output file",
      "str",
      ""
    ],
    "output_obj_lod13": [
      "OBJ LoD13 output file",
      "str",
      ""
    ],
    "output_obj_lod22": [
      "OBJ LoD22 output file",
      "str",
      ""
    ],
    "output_ogr": [
      "2D vector output file or DB connection string",
      "str",
      ""
    ],
    "output_ogr_format": [
      "2D vector output format (eg GPKG or PostgreSQL)",
      "str",
      ""
    ],
    "output_ogr_overwrite": [
      "Overwrite 2D vector output. If false then output is appended in case of existing file",
      "bool",
      true
    ],
    "output_ogr_EPSG": [
      "EPSG code for the Coordinate Reference System of OGR output",
      "int",
      31370
    ],
    "r_line_epsilon": [
      "maximum distance between detected line and its inliers",
      "float",
      0.4000000059604645
    ],
    "r_lod13_step_height": [
      "Step height used in LoD1.3 generalisation; roofparts with a height difference smaller than this value are merged",
      "float",
      3.0
    ],
    "r_normal_k": [
      "number of neighbors used for normal estimation",
      "int",
      5
    ],
    "r_optimisation_data_term": [
      "Increase to get more detailed models. Decrease to get more simplified/generalised models.Increase to get more detailed models. Decrease to get more simplified/generalised models.",
      "float",
      7.0
    ],
    "r_plane_epsilon": [
      "maximum distance between plane and its inliers",
      "float",
      0.20000000298023224
    ],
    "r_plane_k": [
      "number of neighbors used for region growing plane detection",
      "int",
      15
    ],
    "r_plane_min_points": [
      "minimum number of inliers in each plane",
      "int",
      15
    ],
    "r_plane_normal_angle": [
      "maximum angle between plane normal and inlier normal, expressed as the dot product between the two normals. Eg 1.0 is a 0 degree angle and lower values are larger angles",
      "float",
      0.75
    ],
    "skip_attribute_name": [
      "name of boolean attribute in input footprints that tells if the building should be skipped for full LoD1.3+ reconstruction. Eg used for greenhouses and very big industrial buildings, since these are difficult/slow to process due to glass roofs and large footprint area.",
      "str",
      "skip"
    ]
  },
  "nodes": {
    "CityJSONWriter": {
      "marked_inputs": {
        "attributes": false,
        "footprints": false,
        "geometry_lod12": false,
        "geometry_lod13": false,
        "geometry_lod22": false,
        "part_attributes": false
      },
      "parameters": {
        "filepath": "{{output_cityjson}}",
        "identifier_attribute": "{{building_identifier}}",
        "meta_identifier": "{{output_cj_identifier}}",
        "meta_poc_address": "{{output_cj_poc_address}}",
        "meta_poc_contactName": "{{output_cj_poc_contactName}}",
        "meta_poc_contactType": "{{output_cj_poc_contactType}}",
        "meta_poc_emailAddress": "{{output_cj_poc_email}}",
        "meta_poc_phone": "{{output_cj_poc_phone}}",
        "meta_poc_website": "{{output_cj_poc_website}}",
        "meta_referenceDate": "{{output_cj_referenceDate}}",
        "meta_referenceSystem": "{{output_cj_referenceSystem}}",
        "meta_title": "{{output_cj_title}}",
        "output_attribute_names": {},
        "prettyPrint": false
      },
      "position": [
        1791.0,
        243.0
      ],
      "type": [
        "CoreIO",
        "CityJSONWriter"
      ]
    },
    "LASInPolygons": {
      "connections": {
        "ground_elevations": [
          [
            "CityJSONWriter",
            "attributes"
          ],
          [
            "NestedFlowchart",
            "LOD1Extruder-LoD11.floor_elevation"
          ],
          [
            "NestedFlowchart",
            "ArrExtruder-LoD12.floor_elevation"
          ],
          [
            "NestedFlowchart",
            "ArrExtruder-LoD13.floor_elevation"
          ],
          [
            "NestedFlowchart",
            "ArrExtruder-LoD22.floor_elevation"
          ]
        ],
        "point_clouds": [
          [
            "NestedFlowchart",
            "PointCloudClassSplit.point_cloud"
          ]
        ]
      },
      "marked_inputs": {
        "buf_polygons": false,
        "polygons": false
      },
      "marked_outputs": {
        "ground_elevations": false,
        "point_clouds": false
      },
      "parameters": {
        "buffer": 1.0,
        "building_class": 6,
        "cellsize": 50.0,
        "ground_class": 2,
        "ground_percentile": 0.05000000074505806,
        "las_filepaths": "{{input_pointcloud}}"
      },
      "position": [
        128.0,
        311.0
      ],
      "type": [
        "building-reconstruction",
        "LASInPolygons"
      ]
    },
    "NestedFlowchart": {
      "connections": {
        "ArrDissolve-LoD12.global_elevation_50p": [
          [
            "CityJSONWriter",
            "attributes"
          ],
          [
            "OGRWriter-LoD11",
            "attributes"
          ]
        ],
        "ArrDissolve-LoD12.global_elevation_70p": [
          [
            "CityJSONWriter",
            "attributes"
          ],
          [
            "OGRWriter-LoD11",
            "attributes"
          ]
        ],
        "ArrDissolve-LoD12.global_elevation_max": [
          [
            "CityJSONWriter",
            "attributes"
          ],
          [
            "OGRWriter-LoD11",
            "attributes"
          ]
        ],
        "ArrDissolve-LoD12.global_elevation_min": [
          [
            "CityJSONWriter",
            "attributes"
          ],
          [
            "OGRWriter-LoD11",
            "attributes"
          ]
        ],
        "FacesSelector-LoD12.faces": [
          [
            "CityJSONWriter",
            "geometry_lod12"
          ]
        ],
        "FacesSelector-LoD13.faces": [
          [
            "CityJSONWriter",
            "geometry_lod13"
          ]
        ],
        "FacesSelector-LoD22.faces": [
          [
            "CityJSONWriter",
            "geometry_lod22"
          ]
        ],
        "PolygonTriangulator-LoD12.multi_triangle_collections": [
          [
            "OBJVecWriter-LoD12",
            "triangles"
          ]
        ],
        "PolygonTriangulator-LoD13.multi_triangle_collections": [
          [
            "OBJVecWriter-LoD13",
            "triangles"
          ]
        ],
        "PolygonTriangulator-LoD22.multi_triangle_collections": [
          [
            "OBJVecWriter-LoD22",
            "triangles"
          ]
        ],
        "SegmentRasterise.data_area": [
          [
            "OGRWriter-LoD11",
            "attributes"
          ]
        ],
        "SkipReplaceTester.replace": [
          [
            "CityJSONWriter",
            "attributes"
          ],
          [
            "OGRWriter-LoD11",
            "attributes"
          ]
        ],
        "SkipReplaceTester.roof_type": [
          [
            "CityJSONWriter",
            "attributes"
          ],
          [
            "OGRWriter-LoD11",
            "attributes"
          ]
        ],
        "SkipReplaceTester.skip": [
          [
            "CityJSONWriter",
            "attributes"
          ],
          [
            "OGRWriter-LoD11",
            "attributes"
          ]
        ],
        "Validator-LoD12.errors": [
          [
            "CityJSONWriter",
            "attributes"
          ]
        ],
        "Validator-LoD13.errors": [
          [
            "CityJSONWriter",
            "attributes"
          ]
        ],
        "Validator-LoD22.errors": [
          [
            "CityJSONWriter",
            "attributes"
          ]
        ]
      },
      "marked_inputs": {
        "Arr2LinearRings-LoD12.attributes": false,
        "Arr2LinearRings-LoD13.attributes": false,
        "Arr2LinearRings-LoD22.attributes": false,
        "ArrExtruder-LoD12.floor_elevation": false,
        "ArrExtruder-LoD13.floor_elevation": false,
        "ArrExtruder-LoD22.floor_elevation": false,
        "AttrRingsSelector-LoD12.attributes_A": false,
        "AttrRingsSelector-LoD12.linear_rings_A": false,
        "AttrRingsSelector-LoD13.attributes_A": false,
        "AttrRingsSelector-LoD13.linear_rings_A": false,
        "AttrRingsSelector-LoD22.attributes_A": false,
        "AttrRingsSelector-LoD22.linear_rings_A": false,
        "AttributeTester.attributes": false,
        "BuildArrFromLines.footprint": false,
        "DataCoverageCalc.footprint_polygon": false,
        "LOD1Extruder-LoD11.floor_elevation": false,
        "LOD1Extruder-LoD11.polygon": false,
        "NestedFlowchart.globals": false,
        "PointCloudClassSplit.point_cloud": false
      },
      "marked_outputs": {
        "ArrDissolve-LoD12.global_elevation_50p": false,
        "ArrDissolve-LoD12.global_elevation_70p": false,
        "ArrDissolve-LoD12.global_elevation_max": false,
        "ArrDissolve-LoD12.global_elevation_min": false,
        "AttrRingsSelector-LoD12.attributes": false,
        "AttrRingsSelector-LoD12.linear_rings": false,
        "AttrRingsSelector-LoD13.attributes": false,
        "AttrRingsSelector-LoD13.linear_rings": false,
        "AttrRingsSelector-LoD22.attributes": false,
        "AttrRingsSelector-LoD22.linear_rings": false,
        "DataCoverageCalc.data_coverage": false,
        "DetectPlanes.roof_pt_cnt": false,
        "DetectPlanes.total_roofplane_cnt": false,
        "DetectPlanes.unsegmented_pt_cnt": false,
        "DetectPlanes.wall_pt_cnt": false,
        "FacesSelector-LoD12.faces": false,
        "FacesSelector-LoD13.faces": false,
        "FacesSelector-LoD22.faces": false,
        "NestedFlowchart.timings": false,
        "PC2MeshQuality-LoD11.error_hist": false,
        "PC2MeshQuality-LoD11.m2pc_error_hist": false,
        "PC2MeshQuality-LoD11.m2pc_error_max": false,
        "PC2MeshQuality-LoD11.mesh_error_f": false,
        "PC2MeshQuality-LoD12.error_hist": false,
        "PC2MeshQuality-LoD12.m2pc_error_hist": false,
        "PC2MeshQuality-LoD12.m2pc_error_max": false,
        "PC2MeshQuality-LoD12.mesh_error_f": false,
        "PC2MeshQuality-LoD13.error_hist": false,
        "PC2MeshQuality-LoD13.m2pc_error_hist": false,
        "PC2MeshQuality-LoD13.m2pc_error_max": false,
        "PC2MeshQuality-LoD13.mesh_error_f": false,
        "PC2MeshQuality-LoD22.error_hist": false,
        "PC2MeshQuality-LoD22.m2pc_error_hist": false,
        "PC2MeshQuality-LoD22.m2pc_error_max": false,
        "PC2MeshQuality-LoD22.mesh_error_f": false,
        "PolygonTriangulator-LoD11.multi_triangle_collections": false,
        "PolygonTriangulator-LoD12.multi_triangle_collections": false,
        "PolygonTriangulator-LoD13.multi_triangle_collections": false,
        "PolygonTriangulator-LoD22.multi_triangle_collections": false,
        "SegmentRasterise.data_area": false,
        "SkipReplaceTester.replace": false,
        "SkipReplaceTester.roof_type": false,
        "SkipReplaceTester.skip": false,
        "Validator-LoD12.errors": false,
        "Validator-LoD13.errors": false,
        "Validator-LoD22.errors": false
      },
      "parameters": {
        "filepath": "reconstruct_.json"
      },
      "position": [
        621.0,
        -208.0
      ],
      "type": [
        "Core",
        "NestedFlowchart"
      ]
    },
    "OBJVecWriter-LoD12": {
      "marked_inputs": {
        "attributes": false,
        "triangles": false
      },
      "parameters": {
        "Headerline": "Generated with Geoflow",
        "attribute_name": "{{building_identifier}}",
        "filepath": "{{output_obj_lod12}}",
        "no_offset": false,
        "precision": 5
      },
      "position": [
        1505.0,
        -13.0
      ],
      "type": [
        "CoreIO",
        "OBJVecWriter"
      ]
    },
    "OBJVecWriter-LoD13": {
      "marked_inputs": {
        "attributes": false,
        "triangles": false
      },
      "parameters": {
        "Headerline": "Generated with Geoflow",
        "attribute_name": "{{building_identifier}}",
        "filepath": "{{output_obj_lod13}}",
        "no_offset": false,
        "precision": 5
      },
      "position": [
        1491.0,
        262.0
      ],
      "type": [
        "CoreIO",
        "OBJVecWriter"
      ]
    },
    "OBJVecWriter-LoD22": {
      "marked_inputs": {
        "attributes": false,
        "triangles": false
      },
      "parameters": {
        "Headerline": "Generated with Geoflow",
        "attribute_name": "{{building_identifier}}",
        "filepath": "{{output_obj_lod22}}",
        "no_offset": false,
        "precision": 5
      },
      "position": [
        1555.0,
        484.0
      ],
      "type": [
        "CoreIO",
        "OBJVecWriter"
      ]
    },
    "OGRLoader": {
      "connections": {
        "attributes": [
          [
            "CityJSONWriter",
            "attributes"
          ],
          [
            "OBJVecWriter-LoD12",
            "attributes"
          ],
          [
            "OBJVecWriter-LoD13",
            "attributes"
          ],
          [
            "OBJVecWriter-LoD22",
            "attributes"
          ],
          [
            "NestedFlowchart",
            "Arr2LinearRings-LoD22.attributes"
          ],
          [
            "NestedFlowchart",
            "AttrRingsSelector-LoD13.attributes_A"
          ],
          [
            "NestedFlowchart",
            "AttrRingsSelector-LoD22.attributes_A"
          ],
          [
            "NestedFlowchart",
            "Arr2LinearRings-LoD13.attributes"
          ],
          [
            "NestedFlowchart",
            "AttrRingsSelector-LoD12.attributes_A"
          ],
          [
            "NestedFlowchart",
            "Arr2LinearRings-LoD12.attributes"
          ],
          [
            "NestedFlowchart",
            "AttributeTester.attributes"
          ],
          [
            "OGRWriter-LoD11",
            "attributes"
          ]
        ],
        "linear_rings": [
          [
            "CityJSONWriter",
            "footprints"
          ],
          [
            "OGRWriter-LoD11",
            "geometries"
          ],
          [
            "PolygonSimplifyGEOS",
            "polygons"
          ]
        ]
      },
      "marked_outputs": {
        "area": false,
        "attributes": false,
        "is_valid": false,
        "line_strings": false,
        "linear_rings": false
      },
      "parameters": {
        "base_elevation": 0.0,
        "feature_select": 0,
        "filepath": "{{input_footprint}}",
        "layer_id": 0
      },
      "position": [
        198.5,
        38.0679931640625
      ],
      "type": [
        "io-gdal",
        "OGRLoader"
      ]
    },
    "OGRWriter-LoD11": {
      "marked_inputs": {
        "attributes": false,
        "geometries": false
      },
      "parameters": {
        "create_directories": true,
        "epsg": "{{output_ogr_EPSG}}",
        "filepath": "{{output_ogr}}",
        "gdaldriver": "{{output_ogr_format}}",
        "layername": "LoD11",
        "only_output_mapped_attrs": false,
        "output_attribute_names": {},
        "overwrite": "{{output_ogr_overwrite}}",
        "require_attributes": true,
        "transaction_batch_size_": 1000
      },
      "position": [
        1810.0,
        -89.0
      ],
      "type": [
        "io-gdal",
        "OGRWriter"
      ]
    },
    "PolygonBufferGEOS": {
      "connections": {
        "offset_polygons": [
          [
            "LASInPolygons",
            "buf_polygons"
          ]
        ]
      },
      "marked_inputs": {
        "polygons": false
      },
      "marked_outputs": {
        "offset_polygons": false
      },
      "parameters": {
        "offset": 4.0
      },
      "position": [
        151.0,
        263.0
      ],
      "type": [
        "io-gdal",
        "PolygonBufferGEOS"
      ]
    },
    "PolygonSimplifyGEOS": {
      "connections": {
        "simplified_polygons": [
          [
            "LASInPolygons",
            "polygons"
          ],
          [
            "NestedFlowchart",
            "LOD1Extruder-LoD11.polygon"
          ],
          [
            "NestedFlowchart",
            "AttrRingsSelector-LoD12.linear_rings_A"
          ],
          [
            "NestedFlowchart",
            "AttrRingsSelector-LoD13.linear_rings_A"
          ],
          [
            "NestedFlowchart",
            "BuildArrFromLines.footprint"
          ],
          [
            "NestedFlowchart",
            "AttrRingsSelector-LoD22.linear_rings_A"
          ],
          [
            "NestedFlowchart",
            "DataCoverageCalc.footprint_polygon"
          ],
          [
            "PolygonBufferGEOS",
            "polygons"
          ]
        ]
      },
      "marked_inputs": {
        "polygons": false
      },
      "marked_outputs": {
        "simplified_polygons": false
      },
      "parameters": {
        "tolerance": 0.009999999776482582
      },
      "position": [
        153.0,
        195.0
      ],
      "type": [
        "io-gdal",
        "PolygonSimplifyGEOS"
      ]
    }
  }
}